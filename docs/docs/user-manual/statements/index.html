<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.90.0" />
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="https://boschresearch.github.io/blech-doc/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="https://boschresearch.github.io/blech-doc/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-192x192.png" sizes="192x192">

<title>Statements | Blech</title>
<meta name="description" content="In its core, Blech is an imperative language.
Blech strictly separates between statements that govern the flow of control and expressions that …">
<meta property="og:title" content="Statements" />
<meta property="og:description" content="In its core, Blech is an imperative language. Blech strictly separates between statements that govern the flow of control and expressions that evaluate to a value. Both, a statement and an expression may have side-effects.
Activities and functions Control flow is organised with two kinds of procedures: activities and functions. Functions are used like in any other imperative language. In Blech they have two parameter lists to support causality analysis." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://boschresearch.github.io/blech-doc/docs/user-manual/statements/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2020-08-26T18:48:18+02:00" /><meta property="og:site_name" content="Blech" />

<meta itemprop="name" content="Statements">
<meta itemprop="description" content="In its core, Blech is an imperative language. Blech strictly separates between statements that govern the flow of control and expressions that evaluate to a value. Both, a statement and an expression may have side-effects.
Activities and functions Control flow is organised with two kinds of procedures: activities and functions. Functions are used like in any other imperative language. In Blech they have two parameter lists to support causality analysis.">
<meta itemprop="dateModified" content="2020-08-26T18:48:18+02:00" />
<meta itemprop="wordCount" content="2997">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Statements"/>
<meta name="twitter:description" content="In its core, Blech is an imperative language. Blech strictly separates between statements that govern the flow of control and expressions that evaluate to a value. Both, a statement and an expression may have side-effects.
Activities and functions Control flow is organised with two kinds of procedures: activities and functions. Functions are used like in any other imperative language. In Blech they have two parameter lists to support causality analysis."/>




<link rel="preload" href="https://boschresearch.github.io/blech-doc/scss/main.min.d75c3d940bf0614613f22420ee723cee36dd4ebc30cdeaa13cb2b417438390a1.css" as="style">
<link href="https://boschresearch.github.io/blech-doc/scss/main.min.d75c3d940bf0614613f22420ee723cee36dd4ebc30cdeaa13cb2b417438390a1.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<script src=https://boschresearch.github.io/blech-doc/js/opt-in.js></script>


  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="https://boschresearch.github.io/blech-doc/">
		<span class="navbar-logo"><svg id="Ebene_1" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 67.08 47.3"><defs><style>.cls-1{fill:#919392;stroke:#919392;stroke-linecap:round;stroke-linejoin:round}</style></defs><title>blech_grau_kontur</title><polygon class="cls-1" points="3.23 25.31 0.5 26.95 33.53 46.8 66.58 26.95 66.58 20.35 63.77 18.66 33.54 36.82 33.53 33.61 61.08 17.05 33.53 0.5 0.5 20.35 33.53 40.2 63.39 22.28 63.39 25.5 33.53 43.61 3.23 25.31"/></svg></span><span class="font-weight-bold ">Blech</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="https://boschresearch.github.io/blech-doc/about/" ><span>About us</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="https://boschresearch.github.io/blech-doc/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="https://boschresearch.github.io/blech-doc/blog/" ><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="https://boschresearch.github.io/blech-doc/community/" ><span>Community</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="https://boschresearch.github.io/blech-doc/research/" ><span>Research</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"><input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsgetting-started-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/getting-started/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsgetting-started"><span class="">Getting Started</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsgetting-startedblechc-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/getting-started/blechc/" title="The Blech compiler - blechc" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgetting-startedblechc"><span class="">Blech compiler</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsgetting-startedvsce-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/getting-started/vsce/" title="Blech Language Services - the VS Code extension" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgetting-startedvsce"><span class="">Blech Language Services</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docsuser-manual-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/" title="The Blech language - user manual" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsuser-manual"><span class="">User manual</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsuser-manualmoc-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/moc/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualmoc"><span class="">Model of execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsuser-manualnotation-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/notation/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualnotation"><span class="">Notation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsuser-manuallexical-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/lexical/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manuallexical"><span class="">Lexical elements</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsuser-manualstatements-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/statements/" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualstatements"><span class="td-sidebar-nav-active-item">Statements</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsuser-manualdeclarations-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/declarations/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualdeclarations"><span class="">Declarations</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsuser-manualtypes-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/types/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualtypes"><span class="">Types</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsuser-manualexpressions-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/expressions/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualexpressions"><span class="">Expressions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsuser-manualmodules-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/modules/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualmodules"><span class="">Modules</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguage-evolution-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/" title="Blech language evolution" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguage-evolution"><span class="">Language Evolution</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id="m-docslanguage-evolutionblech-c-interface-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/blech-c-interface/" title="Blech&#39;s interface to C" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguage-evolutionblech-c-interface"><span class="">Blech-C interface</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionblech-c-interfaceenv-variables-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/blech-c-interface/env-variables/" title="Accessing variables in the Blech environment" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionblech-c-interfaceenv-variables"><span class="">Environment variables</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionblech-c-interfacec-bindings-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/blech-c-interface/c-bindings/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionblech-c-interfacec-bindings"><span class="">C bindings</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionbits-and-bytes-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/bits-and-bytes/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionbits-and-bytes"><span class="">Bits and bytes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child collapse" id="m-docslanguage-evolutionborrowing-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/" title="References, borrowing and causality" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguage-evolutionborrowing"><span class="">Borrowing</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionborrowing10_references-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/10_references/" title="References in Blech" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionborrowing10_references"><span class="">References</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionborrowing20_borrowing-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/20_borrowing/" title="Borrowing for references" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionborrowing20_borrowing"><span class="">Borrowing</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionborrowing30_let-ref-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/30_let-ref/" title="Immutable references - `let ref`" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionborrowing30_let-ref"><span class="">Immutable references</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionborrowing40_partials-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/40_partials/" title="Partial borrowing and borrowed parts" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionborrowing40_partials"><span class="">Partials</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionmodules-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/modules/" title="Programs and modules - the Blech compilation units" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionmodules"><span class="">Modules</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsblechc-development-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/" title="Guide to blechc development" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsblechc-development"><span class="">Blechc development</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentconst-and-expr-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/const-and-expr/" title="Expressions, conditions, initialisers, constants" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentconst-and-expr"><span class="">Expressions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentpctree-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/pctree/" title="Program counter trees" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentpctree"><span class="">PC trees</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentexternal-vars-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/external-vars/" title="Local and external variables" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentexternal-vars"><span class="">Variables</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentcpdata-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/cpdata/" title="Translating Blech variable names to C" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentcpdata"><span class="">Variable Translation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentgit-workflow-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/git-workflow/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentgit-workflow"><span class="">Git workflow</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmenttraversals-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/traversals/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmenttraversals"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsexamples-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsexamples"><span class="">Blech examples</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesvirtuallock-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/virtuallock/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesvirtuallock"><span class="">Virtual Safe Lock</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesblinker-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/blinker/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesblinker"><span class="">Blinker</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesstopwatch-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/stopwatch/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesstopwatch"><span class="">Stopwatch</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesreact-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/react/" title="React - a reaction test game" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesreact"><span class="">React</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesdcf77-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/dcf77/" title="Decoding the DCF77 longwave time signal" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesdcf77"><span class="">DCF77 decoding</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscontributing-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/contributing/" title="Contributing to Blech development" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docscontributing"><span class="">Contributing</span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/boschresearch/blech-doc/tree/master/website/content/en/docs/user-manual/statements.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa fa-file-alt fa-fw"></i> View page source</a>
  <a href="https://github.com/boschresearch/blech-doc/edit/master/website/content/en/docs/user-manual/statements.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
  <a href="https://github.com/boschresearch/blech-doc/new/master/website/content/en/docs/user-manual/statements.md?filename=change-me.md&amp;value=---%0D%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0D%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0D%0Aweight%3A&#43;100%0D%0Adescription%3A&#43;%3E-%0D%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0D%0A---%0D%0A%0D%0A%23%23&#43;Heading%0D%0A%0D%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0D%0A%0D%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0D%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0D%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0D%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0D%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Create child page</a>
  <a href="https://github.com/boschresearch/blech-doc/issues/new?title=Statements" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/boschresearch/blech/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
  
</div>

            


<div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#activities-and-functions">Activities and functions</a></li>
    <li><a href="#synchronous-statements">Synchronous statements</a>
      <ul>
        <li><a href="#await">Await</a></li>
        <li><a href="#run">Run</a></li>
        <li><a href="#cobegin">Cobegin</a></li>
        <li><a href="#prev">Prev</a></li>
        <li><a href="#abort-and-reset">Abort and reset</a></li>
      </ul>
    </li>
    <li><a href="#imperative-control-flow">Imperative control flow</a>
      <ul>
        <li><a href="#assignment">Assignment</a></li>
        <li><a href="#do-block">Do block</a></li>
        <li><a href="#if">If</a></li>
        <li><a href="#while">While</a></li>
        <li><a href="#repeat">Repeat</a></li>
        <li><a href="#return">Return</a></li>
        <li><a href="#function-call">Function call</a></li>
        <li><a href="#semicolons-in-blech">Semicolons in Blech</a></li>
      </ul>
    </li>
  </ul>
</nav></div>



            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://boschresearch.github.io/blech-doc/docs/">Documentation</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/">User manual</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/statements/">Statements</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Statements</h1>
	
	<header class="article-meta">
		
		
			
				


			
				


			
		
		
	</header>    
	<p>In its core, Blech is an imperative language.
Blech strictly separates between <em>statements</em> that govern the flow of control and <em>expressions</em> that evaluate to a value.
Both, a statement and an expression may have side-effects.</p>
<h2 id="activities-and-functions">Activities and functions</h2>
<p>Control flow is organised with two kinds of procedures: <em>activities</em> and <em>functions</em>.
Functions are used like in any other imperative language.
In Blech they have two parameter lists to support causality analysis.</p>
<p>See the section on <a href="../../declarations/#subprograms">subprogram declarations</a>
 for more details.</p>
<p>Functions must terminate within a reaction. Therefore they are said to be instantaneous.</p>
<p>Activities are called similarly to functions but their execution continues until it reaches a pause to end the current reaction.
In the next reaction they resume from the location they have paused and continue execution until the next pause.
Each reaction of an activity must end after finitely many computation steps.
However the activity itself may perform an unbounded number of reactions and never terminate.
It may also terminate after a finite number of reactions.
In any case, activities must not be instantaneous&mdash;they need to pause at least once before termination.
The values of local variables in activities are stored from one reaction to the next.</p>
<p>Activities may call other activities or functions.
Functions however can only call other functions.</p>
<h2 id="synchronous-statements">Synchronous statements</h2>
<p>Here we discuss statements that are specific to the synchronous paradigm of Blech.
These statements control the reactive behaviour of the program and hence may only appear inside activities, not in functions.</p>
<h3 id="await">Await</h3>
<p>The aforementioned &ldquo;pause&rdquo; is denoted as follows.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">Pause</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;await&#34;</span> <span style="color:#000">Condition</span>
</code></pre></div><p>The <code>await</code> statement marks the end of a reaction.
The control flow stops at this statement and the program &ldquo;waits&rdquo; for the next reaction to start.
Once an activity resumes its execution at an <code>await</code> statement the condition is checked.
If it is true, the control flow proceeds to the next statement.
Otherwise, the reaction ends immediately and the control flow remains at the same location.</p>
<h4 id="example-simple-reactive-control-flow">Example: Simple reactive control flow</h4>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">activity MyAct (in1: bool, in2: float32) (out1: uint8)
    repeat
        await in1
        out1 = (out1 + 1) % 100 // count from 0 to 99
    until in2 &lt; 0.0 end
end
</code></pre></td></tr></table>
</div>
</div><p>Initially, <code>MyAct</code> is entered and the control flow proceeds to line 3 and stops (regardless of the inputs).
In the next tick, <code>MyAct</code> resumes its execution at the <code>await</code> statement in line 3.
It checks the boolean input variable <code>in1</code>.
If it is false, the reaction ends immediately, the control flow does not advance.
Otherwise, if <code>in1</code> is true, the calculation is carried out in line 4.
This updates <code>out1</code> to a new value.
Finally, if input <code>in2</code> is indeed less than 0 the activity terminates its execution.
Otherwise the control flow loops around from line 5 back to line 2 and finally the reaction ends again in line 3.</p>
<h4 id="example-proceed-with-the-next-tick">Example: Proceed with the next tick</h4>
<p>For example in time triggered systems we often just want to await the next period and proceed. This is simply expressed by</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">await true
</code></pre></div><h3 id="run">Run</h3>
<p>An activity call is given by the following grammar.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">ActivityCall</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;run&#34;</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">Receiver</span> <span style="color:#000">&#34;=&#34;</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#000">Identifier</span> <span style="color:#000">RhsArgList</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">LhsArgList</span><span style="color:#000;font-weight:bold">]</span>
<span style="color:#000">Receiver</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">Wildcard</span> | <span style="color:#000">Identifier</span> | <span style="color:#000;font-weight:bold">(</span><span style="color:#000">&#34;var&#34;</span> | <span style="color:#000">&#34;let&#34;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000">Identifier</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">&#34;:&#34;</span> <span style="color:#000">Type</span><span style="color:#000;font-weight:bold">])</span>
<span style="color:#000">RhsArgList</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;()&#34;</span> | <span style="color:#000">&#34;(&#34;</span> <span style="color:#000">RhsExpr</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">&#34;,&#34;</span> <span style="color:#000">RhsExpr</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">&#34;)&#34;</span>
<span style="color:#000">LhsArgList</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;()&#34;</span> | <span style="color:#000">&#34;(&#34;</span> <span style="color:#000">LhsExpr</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">&#34;,&#34;</span> <span style="color:#000">LhsExpr</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">&#34;)&#34;</span>
</code></pre></div><p>The <code>run</code> keyword indicates an activity call.
Arguments must be provided that match the callee&rsquo;s declaration in number and type.
If the callee does not declare any outputs the second pair of parentheses may be dropped for readability.
Input arguments must evaluate to a value that matches the declared type.
Output arguments must evaluate to a memory location that the callee can read from and write to.
If the callee is an activity that eventually terminates and declares a return value, this return value must be either received into some variable or ignored using a wildcard. The receiving variable is either a mutable variable declared earlier or can be declared inside the <code>run</code> statement. In this case it can also be declared as a read-only variable using <code>let</code>. The receiver may be used in the code sequentially after the <code>run</code> statement.</p>
<p>When control flow reaches a <code>run</code> statement the sub-activity is immediately called and the control flow is handed over to the callee.
It remains within the callee for as many reactions as it runs (but at least one reaction).
In every reaction inputs are passed though to the callee and its outputs are propagated outside.
Should the callee terminate, the control flow returns to the caller and proceeds with the next statement.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">// declaration
activity A (a: [8]int32, b: int32) (c: int32) returns bool
    /* some code */
    ...
end

    /* ... inside another activity ... */
    var result: bool
    var array: [8]int32 = {1, 2, 3, 4, 5, 6, 7, 8}
    var output: int32
    // usage
    run result = A(array, 7)(output)

    // alternative: declare receiver within &#34;run&#34;
    run let result2 = A(array, 7)(output)
</code></pre></div><h3 id="cobegin">Cobegin</h3>
<p>Concurrent composition is expressed with the <code>cobegin</code> statement.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">ForkJoin</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;cobegin&#34;</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">&#34;weak&#34;</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#000">StmtBlock</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">&#34;with&#34;</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">&#34;weak&#34;</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#000">StmtBlock</span><span style="color:#000;font-weight:bold">)</span>+ <span style="color:#000">&#34;end&#34;</span>
</code></pre></div><p>Using <code>cobegin</code> it is possible to compose arbitrary pieces of code.
The goal is not to parallelise to gain execution speed.
Rather this the language construct to express that two (or more) functionalities should be computed within the same reaction.
As such concurrency is rather a modelling concept in Blech.
The code generator will actually sequentialise the code in a causally correct order.</p>


<div class="alert alert-info" role="alert">
<h4 class="alert-heading">Note</h4>

    In the future there will be the possibility to specify truly parallel executions in Blech which can be carried out independently.

</div>

<h4 id="example-concurrent-composition">Example: Concurrent composition</h4>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">activity P ()
    var x: int32
    var y: int32
    var z: int32
    cobegin
        run A(x)(z)
    with
        run B(y)(x)
    end
end
</code></pre></td></tr></table>
</div>
</div><p>Assume the activities <code>A</code> and <code>B</code> have already been implemented.
In lines 5 &ndash; 9 they are composed concurrently.
This means the control flow of <code>P</code> is forked into two control flow points.
One resides in <code>A</code> (line 6) and one in <code>B</code> (line 8).
With every tick both, <code>A</code> and <code>B</code>, will perform one reaction.
When both subprograms terminate, <code>P</code> regains control in line 9 and, in this example, terminates too.
Of course, more than two branches can be combined using more <code>with</code> branches.
Note that the reaction of <code>B</code> will be carried out before the reaction of <code>A</code> due to causality:
First the unique value of <code>x</code> needs to be set by writer <code>B</code> before the reader <code>A</code> may use it.</p>
<p>The <code>cobegin</code> statement is a composite statement like a <code>repeat</code> loop or an <code>if</code> statement.
Control flow can remain within the <code>cobegin</code> branches for multiple reactions.
However in general the various branches can perform a different number of reactions, possibly infinitely many.
We therefore need to control the termination of <code>cobegin</code> as a whole using the <code>weak</code> qualifiers.</p>
<p>Formally, a <code>cobegin</code> statement terminates in the reaction in which all strong branches have terminated.
If all branches are weak, the <code>cobegin</code> statement terminates in the reaction in which some branch terminates.</p>
<p>In the above example no branch is <code>weak</code>.
We say all branches are &ldquo;strong&rdquo;.
This means the <code>cobegin</code> statement terminates when <em>all</em> of its branches have terminated.
Branches that finish earlier (have fewer reaction to do) will simply do nothing until the last strong branch has terminated.
The following two examples illustrate the usage of the <code>weak</code> qualifier.</p>
<h4 id="example-weak-and-strong-branches">Example: Weak and strong branches</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">/* ... inside some activity ... */
var res: nat8
cobegin weak
    // non-terminating branch
    repeat
        await true
        out1 = (out1 + 1) % 100
    end
with
    // terminates once a key is pressed
    res = run ReadKeyStroke()
end
</code></pre></div><p>The first branch contains an infinite loop in the sense that every iteration ends in a pause but the number of reactions is unbounded.
The loop is placed into a weak branch that allows to terminate the loop at the end of some reaction.
The second branch contains an activity call that is expected to return some value eventually.
In the reaction in which the result is returned the weak branch will be aborted (after it has done one iteration) and the control flow continues with the next statement following the <code>cobegin</code>.</p>
<h4 id="example-all-branches-weak">Example: All branches weak</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">cobegin weak
    await isButtonPressed
with weak
    await hasReceivedSignal
end
</code></pre></div><p>In this example there are no strong branches.
The first branch to terminate will abort all others.
In this example it means as soon as <code>isButtonPressed</code> or <code>hasReceivedSignal</code> is true (or both are true!) the <code>cobegin</code> statement terminates and control flow continues with the next statement.</p>
<h3 id="prev">Prev</h3>
<p><code>prev</code> is not a statement but a special operator which is most useful in the context of a <code>cobegin</code> block.</p>
<p>The introductory chapter explained <a href="../moc/#causality">causality</a>
.
In short, this means two concurrent branches may not write the same shared memory and furthermore cyclical read-write dependencies are prohibited as well.
Sometimes however we need to express a quasi-cycle wherein one branch starts off with a value that has already been computed in the previous reaction. This is conveniently expressed using the <code>prev</code> operator.</p>
<h4 id="example-previous-values">Example: Previous values</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">cobegin 
    run A (prev x)(y)
with 
    run B (y)(x)
end
</code></pre></div><p>Here, in every reaction, the <em>previous</em> value of <code>x</code>, i.e. the result of the previous reaction, is given to <code>A</code> which performs a step and produces a new value for <code>y</code>. This is then used by <code>B</code> to produce a new <em>current</em> value of <code>x</code>.</p>
<p><code>prev</code> can only be used where we expect to read a value. It cannot be used on a left-hand-side of an assignment or in an output argument position. <code>prev</code> may only be applied to values, identified by a name. It cannot be used on arbitrary expressions.
When used on memory of complex data types, <code>prev</code> binds to the outermost part. For a structure <code>s</code> the expression <code>prev s.x</code> is to be read as <code>(prev s).x</code>.</p>
<h3 id="abort-and-reset">Abort and reset</h3>
<p>There are two kinds of synchronous preemptions built into Blech.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">Preemption</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;when&#34;</span> <span style="color:#000">Condition</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">&#34;abort&#34;</span> | <span style="color:#000">&#34;reset&#34;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000">StmtBlock</span> <span style="color:#000">&#34;end&#34;</span>
</code></pre></div><p>When control flow enters a preemption the statements in its body, denoted by <code>StmtBlock</code> in the grammar, are executed until the reaction ends in an <code>await</code> or <code>run</code> statement.
Subsequently, when a reaction resumes execution inside the body, first the <code>when</code> condition is checked.
If it is false, the execution starts as usual.
Otherwise the body is preempted <em>before</em> any statement is executed or expression is evaluated inside the body.
There are two variants of preemptions.
<code>abort</code> means that control flow jumps to the <code>end</code> of the preemption statement.
<code>reset</code> means that control flow restarts at the beginning of <code>StmtBlock</code>.</p>
<p>Note that</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">when Condition reset P end
</code></pre></div><p>is syntactic sugar for</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">var hasTerminated = false
repeat
    when Condition abort
        P
        hasTerminated = true
    end
until hasTerminated end
</code></pre></div><p>where <code>hasTerminated</code> is a fresh boolean variable.</p>
<p>It is, of course, possible that the body is left instantaneously within one reaction.
In this case the preemption is irrelevant for the flow of control.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Important</h4>

    The preemption condition is <em>not</em> checked when the control flow enters the body.
The <code>when</code> condition is only checked when control flow resumes from within the body.
Wrap the preemption inside an <code>if</code> statement in case you want to check the condition before entering the body.

</div>

<h4 id="example-abort-and-reset">Example: Abort and Reset</h4>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">activity A (in1: bool) (out1: uint8)
    // do something ...
    
    when in1 abort
        out1 = 1
        await true
        out1 = 2
        await true
        out1 = 3
    end
    
    // do something else ...
end
</code></pre></td></tr></table>
</div>
</div><p>The statement in line 4 says that <code>when</code> a reaction <em>starts</em> in the block lines 5 &ndash; 9, it is checked whether <code>in1</code> is true and in that case the control flow skips to line 10.
Thus when control flow reaches line 4 it will immediately proceed to line 5, set <code>out1</code> accordingly and finish this reaction in line 6 (regardless of the value of <code>in1</code>).
The next reaction starts by checking the abort condition <code>in1</code>.
If it is true we skip the rest of the block and proceed to line 10.
Otherwise, we check the condition of the <code>await</code> statement which here is vacuously true and the reaction proceeds to line 7 and finishes in line 8.
The same reasoning applies in line 8: the execution is possibly aborted before setting <code>out1</code> to 3.
In any case, the block is left in line 10.</p>
<p>The <code>abort</code> statement is useful whenever we want to skip over a sequence of reactions when we detect some issue at the beginning of a reaction.
Sometimes instead of skipping ahead we would like to restart a sequence of reactions.
For this we may use the <code>reset</code> statement.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">activity MyAct (in1: bool) (out1: uint8)
    // do something ...
    
    when in1 reset // reset instead of abort
        out1 = 1
        await true
        out1 = 2
        await true
        out1 = 3
    end
    
    // do something else ...
end
</code></pre></div><p>It behaves just like the <code>abort</code> statement except it jumps to line 4 if <code>in1</code> is true.</p>
<h2 id="imperative-control-flow">Imperative control flow</h2>
<p>All of the following statements are known from mainstream imperative programming languages.
They may be used inside both, activities and functions.</p>
<h3 id="assignment">Assignment</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">Assignment</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">LhsExpr</span> <span style="color:#000">&#34;=&#34;</span> <span style="color:#000">RhsExpr</span>
</code></pre></div><h3 id="do-block">Do block</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">DoBlock</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;do&#34;</span> <span style="color:#000">StmtBlock</span> <span style="color:#000">&#34;end&#34;</span>
</code></pre></div><p>The <code>do</code> block may be used to define local scopes.</p>
<h4 id="example-local-scopes">Example: Local scopes</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">function f ()
    do
        var x: int8 = 5
    end
    // x is out of scope here
end
</code></pre></div><h3 id="if">If</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">IfStmt</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;if&#34;</span> <span style="color:#000">Condition</span> <span style="color:#000">&#34;then&#34;</span> <span style="color:#000">StmtBlock</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">&#34;elseif&#34;</span> <span style="color:#000">Condition</span> <span style="color:#000">&#34;then&#34;</span> <span style="color:#000">StmtBlock</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">&#34;else&#34;</span> <span style="color:#000">StmtBlock</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#000">&#34;end&#34;</span>
</code></pre></div><h3 id="while">While</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">WhileLoop</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;while&#34;</span> <span style="color:#000">Condition</span> <span style="color:#000">&#34;repeat&#34;</span> <span style="color:#000">StmtBlock</span> <span style="color:#000">&#34;end&#34;</span>
</code></pre></div><p>When using a loop in an activity, there must be some pause on every control flow path through the loop body.
This is not necessary for loops inside functions.
Note that using <code>while</code> loops in activities may lead to unexpected error messages because we deliberately <em>do not</em> evaluate the condition at compile time even if it is trivially true or false.</p>
<p>For example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">activity Toggle()(out:bool)
    while true repeat
        out = not out
        await true
    end
end
</code></pre></div><p>This program will not compile because the compiler thinks there is a control flow path that does not enter the loop and immediately terminates the activity.
Since activities must not be instantaneous this program is rejected.
Use <code>repeat</code> loops instead to avoid this spurious control flow paths that possibly skip the loop.</p>
<h3 id="repeat">Repeat</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">RepeatLoop</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;repeat&#34;</span> <span style="color:#000">StmtBlock</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">&#34;until&#34;</span> <span style="color:#000">Condition</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#000">&#34;end&#34;</span>
</code></pre></div><p><code>repeat</code> loops guarantee that control flow does enter the loop body at least once.
Endless loops (without the <code>until</code> condition) may only be used in activities.
Again, when using a loop in an activity, there must be some pause on every control flow path through the loop body.
This is not necessary for loops inside functions.</p>
<h3 id="return">Return</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">ReturnStmt</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">&#34;return&#34;</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">RhsExpr</span><span style="color:#000;font-weight:bold">]</span> | <span style="color:#000">&#34;return&#34;</span> <span style="color:#000">ActivityCall</span>
</code></pre></div><p>Void activities and functions can use <code>return</code> without an expression to terminate at some point before control flow reaches the last statement.</p>
<h4 id="example-return-from-void-function">Example: Return from void function</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">function setSpeed (velocity: float32) ()
    if velocity &lt; 0 then
        return
    end

    if not isMotorReady() then
        return
    end
    
    halSetSpeed(velocity) // call device driver
end
</code></pre></div><p>This simple example assumes we implement a wrapper for calling a hardware device driver.
In order to avoid an if-then-else cascade <code>setSpeed</code> tests the prerequisites individually and returns in case some of them is not met.</p>
<p>Activities and functions that declare a return type must return a value of this type on every control flow path that reaches the end of the program body.</p>
<p>Activities may only return from their main thread.
In other words <code>return</code> must not occur inside a branch of a <code>cobegin</code> statement.
This is a design decision which avoids cases in which multiple branches could return a value and it is not clear which one &ldquo;wins&rdquo; the race. Furthermore, even if only one branch could return, it still would not be clear whether concurrent branches will execute their reactions entirely or not. For the sake of a clear and easy to understand semantics the above restriction is enforced.</p>
<p>Mind the difference between activity return values and activity output values.
Outputs are set in every reaction of the activity.
A return value is returned precisely once in the reaction that terminates the activity.</p>
<h4 id="example-return-from-activity">Example: Return from activity</h4>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">activity A (in: int32) (out: int32) returns nat8
    var retcode: nat8
    var x: int32
    cobegin weak
        run B(in)(x)
    with
        retcode = run C(x)(out)
    end
    return retcode
end
</code></pre></div><p>In every reaction <code>in</code> is propagated to <code>B</code> and <code>out</code> is propagated from <code>C</code> to the caller.
Only when <code>C</code> terminates the variable <code>retcode</code> is updated, the <code>cobegin</code> statement is terminated and the <code>retcode</code> is returned to the caller.</p>
<p>Activities that simply terminate and pass on the value of their callee may use the syntactic sugar</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">return run A()
</code></pre></div><p>instead of the more verbose</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">run let foo = A()
return foo
</code></pre></div><h3 id="function-call">Function call</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">FunctionCallStmt</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Identifier</span> <span style="color:#000">RhsArgList</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#000">LhsArgList</span><span style="color:#000;font-weight:bold">]</span>
</code></pre></div><p>Blech distinguishes between a function call statement and a function call expression.
On the statement level only void functions may be called.</p>
<p>In summary, a block of statements in Blech is given by the following grammar.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-abnf" data-lang="abnf"><span style="color:#000">StmtBlock</span> ::<span style="color:#ce5c00;font-weight:bold">=</span> 
      <span style="color:#000">Pause</span>
    | <span style="color:#000">ActivityCall</span>
    | <span style="color:#000">ForkJoin</span>
    | <span style="color:#000">Preemption</span>
    | <span style="color:#000">Assignment</span>
    | <span style="color:#000">DoBlock</span>
    | <span style="color:#000">IfStmt</span>
    | <span style="color:#000">WhileLoop</span>
    | <span style="color:#000">RepeatLoop</span>
    | <span style="color:#000">ReturnStmt</span>
    | <span style="color:#000">FunctionCallStmt</span>
    | <span style="color:#000">StmtBlock</span> <span style="color:#000">&#34;;&#34;</span><span style="color:#ce5c00;font-weight:bold">*</span> <span style="color:#000">StmtBlock</span>
</code></pre></div><p>Depending on whether statements are used in an activity or a function their use may be restricted or prohibited (see above).
The optional semicolons in the grammar indicate that it is possible to separate statements in a sequence using semicolons.
We suggest to avoid writing any semicolons unless two (or more) statements are written in one line.</p>
<h3 id="semicolons-in-blech">Semicolons in Blech</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">function f()
    var x: int8 = 0; // do not clutter your code with superfluous &#34;;&#34;
    var y: int8 = 1  // preferred semicolon free style

    x = 7; y = y + x // ok, but usually it is better to write two lines
    x = 7 y = y + x  // compiles but is hardly readable, do not do that
end
</code></pre></div>
	
	
	<div class="text-muted mt-5 pt-3 border-top">
  Last modified August 26, 2020: <a href="https://github.com/boschresearch/blech-doc/commit/384d509751834220dc179f973fe01241f36bcb92">prev added (384d509)</a>
</div>

</div>


          </main>
        </div>
      </div>
      


<div class="analytics-opt-in">
    <div class="text">
        <p>If you opt-in, we use cookies to improve your experience on our site. <a href="https://boschresearch.github.io/blech-doc/about/">Find out more.</a>
        </p>
    </div>  
    <div class="buttons">
        
        <a class="ok btn-sm btn-primary" onclick="optIn()">Opt-in</a>
        <a class="close" onclick="closeNotice()">&times</a>
    </div>
</div>

<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="The Blech mailing list" aria-label="The Blech mailing list">
    <a class="text-white" target="_blank" href="https://groups.google.com/d/forum/blech-lang">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter @BlechLanguage" aria-label="Twitter @BlechLanguage">
    <a class="text-white" target="_blank" href="https://twitter.com/BlechLanguage">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Documentation on GitHub" aria-label="Documentation on GitHub">
    <a class="text-white" target="_blank" href="https://github.com/boschresearch/blech-doc">
      <i class="fas fa-book"></i>
    </a>
  </li>
  
</ul>

        
        
        <h6 class="text-white">Blech users</h6>
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Blech compiler on Github" aria-label="Blech compiler on Github">
    <a class="text-white" target="_blank" href="https://github.com/boschresearch/blech">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Blech tools on Github" aria-label="Blech tools on Github">
    <a class="text-white" target="_blank" href="https://github.com/boschresearch/blech-tools">
      <i class="fas fa-tools"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Collaborate on Slack" aria-label="Collaborate on Slack">
    <a class="text-white" target="_blank" href="https://join.slack.com/t/blech-lang/shared_invite/enQtODkyMDg4MDQ2Mjc2LWZjZWI1MmE2NTNhOGU0ZTVmMGEzMzY1ODlmNzBlMDFhMTIwMDRlZDA1MmU2NjY2OTFlZTA1NWIwMzU3NThkY2I">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
        <h6 class="text-white">Blech developers</h6>
      </div>
      
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2019-2021 The Blech contributors</small>
        
        <small class="ml-1"><a href="https://boschresearch.github.io/blech-doc/about/privacy-policy/" style="color: skyblue" target="_blank">Privacy Policy</a></small>
        
          <p class="mt-2"><a href="https://boschresearch.github.io/blech-doc/about/corporate-information/" style="color: skyblue">Corporate information</a></p>
        
      </div>
      
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='https://boschresearch.github.io/blech-doc/js/tabpane-persist.js'></script>


















<script src="https://boschresearch.github.io/blech-doc/js/main.min.602773ee633d7e2783afada8c31019df4b639c23a2ae03c6139b6530b7f411d4.js" integrity="sha256-YCdz7mM9fieDr62owxAZ30tjnCOirgPGE5tlMLf0EdQ=" crossorigin="anonymous"></script>




  </body>
</html>