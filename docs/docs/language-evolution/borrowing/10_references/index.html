<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.90.0" />
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="https://boschresearch.github.io/blech-doc/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="https://boschresearch.github.io/blech-doc/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="https://boschresearch.github.io/blech-doc/favicons/android-192x192.png" sizes="192x192">

<title>References in Blech | Blech</title>
<meta name="description" content="Adopt the ideas of borrowing in Rust to Blech
">
<meta property="og:title" content="References in Blech" />
<meta property="og:description" content="Adopt the ideas of borrowing in Rust to Blech
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/10_references/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2020-05-15T18:47:04+02:00" /><meta property="og:site_name" content="Blech" />

<meta itemprop="name" content="References in Blech">
<meta itemprop="description" content="Adopt the ideas of borrowing in Rust to Blech
">
<meta itemprop="dateModified" content="2020-05-15T18:47:04+02:00" />
<meta itemprop="wordCount" content="935">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="References in Blech"/>
<meta name="twitter:description" content="Adopt the ideas of borrowing in Rust to Blech
"/>




<link rel="preload" href="https://boschresearch.github.io/blech-doc/scss/main.min.d75c3d940bf0614613f22420ee723cee36dd4ebc30cdeaa13cb2b417438390a1.css" as="style">
<link href="https://boschresearch.github.io/blech-doc/scss/main.min.d75c3d940bf0614613f22420ee723cee36dd4ebc30cdeaa13cb2b417438390a1.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>
<script src=https://boschresearch.github.io/blech-doc/js/opt-in.js></script>


  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="https://boschresearch.github.io/blech-doc/">
		<span class="navbar-logo"><svg id="Ebene_1" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 67.08 47.3"><defs><style>.cls-1{fill:#919392;stroke:#919392;stroke-linecap:round;stroke-linejoin:round}</style></defs><title>blech_grau_kontur</title><polygon class="cls-1" points="3.23 25.31 0.5 26.95 33.53 46.8 66.58 26.95 66.58 20.35 63.77 18.66 33.54 36.82 33.53 33.61 61.08 17.05 33.53 0.5 0.5 20.35 33.53 40.2 63.39 22.28 63.39 25.5 33.53 43.61 3.23 25.31"/></svg></span><span class="font-weight-bold ">Blech</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="https://boschresearch.github.io/blech-doc/about/" ><span>About us</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="https://boschresearch.github.io/blech-doc/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="https://boschresearch.github.io/blech-doc/blog/" ><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="https://boschresearch.github.io/blech-doc/community/" ><span>Community</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="https://boschresearch.github.io/blech-doc/research/" ><span>Research</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"><input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            
<div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    <input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docs-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docs"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsgetting-started-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/getting-started/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsgetting-started"><span class="">Getting Started</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsgetting-startedblechc-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/getting-started/blechc/" title="The Blech compiler - blechc" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgetting-startedblechc"><span class="">Blech compiler</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsgetting-startedvsce-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/getting-started/vsce/" title="Blech Language Services - the VS Code extension" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsgetting-startedvsce"><span class="">Blech Language Services</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsuser-manual-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/" title="The Blech language - user manual" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsuser-manual"><span class="">User manual</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsuser-manualmoc-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/moc/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualmoc"><span class="">Model of execution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsuser-manualnotation-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/notation/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualnotation"><span class="">Notation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsuser-manuallexical-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/lexical/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manuallexical"><span class="">Lexical elements</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsuser-manualstatements-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/statements/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualstatements"><span class="">Statements</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsuser-manualdeclarations-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/declarations/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualdeclarations"><span class="">Declarations</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsuser-manualtypes-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/types/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualtypes"><span class="">Types</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsuser-manualexpressions-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/expressions/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualexpressions"><span class="">Expressions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsuser-manualmodules-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/user-manual/modules/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsuser-manualmodules"><span class="">Modules</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docslanguage-evolution-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/" title="Blech language evolution" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguage-evolution"><span class="">Language Evolution</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docslanguage-evolutionblech-c-interface-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/blech-c-interface/" title="Blech&#39;s interface to C" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguage-evolutionblech-c-interface"><span class="">Blech-C interface</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionblech-c-interfaceenv-variables-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/blech-c-interface/env-variables/" title="Accessing variables in the Blech environment" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionblech-c-interfaceenv-variables"><span class="">Environment variables</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docslanguage-evolutionblech-c-interfacec-bindings-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/blech-c-interface/c-bindings/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionblech-c-interfacec-bindings"><span class="">C bindings</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguage-evolutionbits-and-bytes-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/bits-and-bytes/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionbits-and-bytes"><span class="">Bits and bytes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docslanguage-evolutionborrowing-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/" title="References, borrowing and causality" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docslanguage-evolutionborrowing"><span class="">Borrowing</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docslanguage-evolutionborrowing10_references-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/10_references/" title="References in Blech" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionborrowing10_references"><span class="td-sidebar-nav-active-item">References</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguage-evolutionborrowing20_borrowing-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/20_borrowing/" title="Borrowing for references" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionborrowing20_borrowing"><span class="">Borrowing</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguage-evolutionborrowing30_let-ref-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/30_let-ref/" title="Immutable references - `let ref`" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionborrowing30_let-ref"><span class="">Immutable references</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguage-evolutionborrowing40_partials-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/40_partials/" title="Partial borrowing and borrowed parts" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionborrowing40_partials"><span class="">Partials</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docslanguage-evolutionmodules-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/modules/" title="Programs and modules - the Blech compilation units" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docslanguage-evolutionmodules"><span class="">Modules</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsblechc-development-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/" title="Guide to blechc development" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsblechc-development"><span class="">Blechc development</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentconst-and-expr-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/const-and-expr/" title="Expressions, conditions, initialisers, constants" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentconst-and-expr"><span class="">Expressions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentpctree-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/pctree/" title="Program counter trees" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentpctree"><span class="">PC trees</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentexternal-vars-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/external-vars/" title="Local and external variables" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentexternal-vars"><span class="">Variables</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentcpdata-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/cpdata/" title="Translating Blech variable names to C" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentcpdata"><span class="">Variable Translation</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmentgit-workflow-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/git-workflow/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmentgit-workflow"><span class="">Git workflow</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsblechc-developmenttraversals-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/blechc-development/traversals/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsblechc-developmenttraversals"><span class=""></span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsexamples-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docsexamples"><span class="">Blech examples</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesvirtuallock-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/virtuallock/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesvirtuallock"><span class="">Virtual Safe Lock</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesblinker-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/blinker/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesblinker"><span class="">Blinker</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesstopwatch-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/stopwatch/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesstopwatch"><span class="">Stopwatch</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesreact-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/react/" title="React - a reaction test game" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesreact"><span class="">React</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsexamplesdcf77-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/examples/dcf77/" title="Decoding the DCF77 longwave time signal" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesdcf77"><span class="">DCF77 decoding</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docscontributing-li">
  <a href="https://boschresearch.github.io/blech-doc/docs/contributing/" title="Contributing to Blech development" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-docscontributing"><span class="">Contributing</span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
<a href="https://github.com/boschresearch/blech-doc/tree/master/website/content/en/docs/language-evolution/borrowing/10_references.md" class="td-page-meta--view" target="_blank" rel="noopener"><i class="fa fa-file-alt fa-fw"></i> View page source</a>
  <a href="https://github.com/boschresearch/blech-doc/edit/master/website/content/en/docs/language-evolution/borrowing/10_references.md" class="td-page-meta--edit" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
  <a href="https://github.com/boschresearch/blech-doc/new/master/website/content/en/docs/language-evolution/borrowing/10_references.md?filename=change-me.md&amp;value=---%0D%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0D%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0D%0Aweight%3A&#43;100%0D%0Adescription%3A&#43;%3E-%0D%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0D%0A---%0D%0A%0D%0A%23%23&#43;Heading%0D%0A%0D%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0D%0A%0D%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0D%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0D%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0D%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0D%0A" class="td-page-meta--child" target="_blank" rel="noopener"><i class="fa fa-edit fa-fw"></i> Create child page</a>
  <a href="https://github.com/boschresearch/blech-doc/issues/new?title=References%20in%20Blech" class="td-page-meta--issue" target="_blank" rel="noopener"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/boschresearch/blech/issues/new" class="td-page-meta--project-issue" target="_blank" rel="noopener"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>
  
</div>

            


<div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#parameters-are-references">Parameters are references</a></li>
    <li><a href="#return-values">Return values</a></li>
    <li><a href="#reference-definitions">Reference definitions</a>
      <ul>
        <li><a href="#the-benefit-of-references">The benefit of references</a></li>
        <li><a href="#references-are-not-first-class-types">References are not first-class types</a></li>
        <li><a href="#the-problem-with-references">The problem with references</a></li>
      </ul>
    </li>
  </ul>
</nav></div>



            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="https://boschresearch.github.io/blech-doc/docs/">Documentation</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/">Language Evolution</a>
  </li>
  <li class="breadcrumb-item">
    <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/">Borrowing</a>
  </li>
  <li class="breadcrumb-item active" aria-current="page">
    <a href="https://boschresearch.github.io/blech-doc/docs/language-evolution/borrowing/10_references/">References</a>
  </li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>References in Blech</h1>
	<div class="lead">Adopt the ideas of borrowing in Rust to Blech</div>
	<header class="article-meta">
		
		
			
				


			
				


			
		
		
	</header>    
	<h2 id="parameters-are-references">Parameters are references</h2>
<p>Semantically, Blech passes parameters by reference.</p>
<p>Imagine the following Blech program</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">function outIsInPlus1 (a: int32) (b: int32)
    b = 1
    b = a + b 
end

activity godUsage ()
    var i = 42: int32
    var j: int32
    outIsInPlus1(i)(j) // 43 --&gt; j
    await true
end
</code></pre></div><p>So far so good, the program has the expected behaviour: <code>j</code> gets <code>i + 1</code>.</p>
<p>But if we call the same function with the same <code>variable</code> as input and output we get a strange behaviour.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">activity badUsage ()
    var i = 42: int32
    outIsInPlus1(i)(i)
    await true
end
</code></pre></div><p>If Blech would allow this code and we assume call-by-reference semantics, <code>i</code> has value <code>2</code> after the execution of the function.</p>
<p>This would be an unexpected behavior both from the implementation and the usage point of view.</p>
<p>The implementation does not take into account that <code>a</code> and <code>b</code> may point to the same memory location.
The point of usage we know nothing about the actual implementation. 
The implicit assumption, input <code>a</code> and output <code>b</code> must no be the same memory location is not transparent.</p>
<p>In order to prevent such errors, Blech forbids this usage.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">error: Read-write conflict. i or an alias thereof occurs both in the input and output list of the sub program call.
  --&gt; incr.blc:3:5 [causality]

3  |     outIsInPlus1(i)(i)
   |                     - Output argument.
3  |     outIsInPlus1(i)(i)
   |                  ^ Input argument.
</code></pre></div><p>One might wonder, why a simple increment is allowed</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">    i = i + 1
</code></pre></div><p>while the call of the function</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">    outIsInPlus1(i)(i)
</code></pre></div><p>is not.</p>
<p>The reason is, that parameters are passed by-reference.</p>
<p>The input <code>a</code> takes a read-only reference to the actual input, the output <code>b</code> takes a read-write reference to the actual input.</p>
<p>Semantically the function <code>outIsInPlus1</code> has the following form</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">function outIsInPlus1 (let ref a: int32) (var ref b: int32)
    b = 1
    b = a + b 
end
</code></pre></div><p>Blech forbids taking a read-only reference and an read-write reference to the same memory location at the same time.</p>
<p>Since the compiler rejects such programs, the code generation is free to pass input parameters of functions by value or by reference.
Currently, simple types are passed by reference while composed types are passed by reference.</p>
<p>Activity parameters have the same pass-by-reference semantics. Due to the nature of activities input parameters must always be passed by-reference in the code generation</p>
<h2 id="return-values">Return values</h2>
<p>Return values of functions and activities are always passed by value.</p>
<p>The generated code can either use the stack for simple type returns of functions or write directly to a result location for returned composite values and returned simple values of activities.</p>
<h2 id="reference-definitions">Reference definitions</h2>
<p>Blech also allows references definitions. They are a restricted form of pointers for expressing aliases and associating data structures.</p>
<h3 id="the-benefit-of-references">The benefit of references</h3>
<p>References can be used to express aliases.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">struct S
    var buffer: [3]int32
end

...
    var s: S

    do 
        let i: nat8 = 1
        if s.buffer[i] &gt; 0 then
            s.buffer[i] = s.buffer[i] + 1
        end
    end

    do 
        let i: nat8 = 1
        var ref elem = s.buffer[i]
        if elem &gt; 0 then 
            elem = elem + 1
        end
    end

</code></pre></div><p>This prevents repetition and make a program better readable.</p>
<p>References can also be used to associate data structures</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">
struct S
    var ref buffer: [3]int32
end


...
    
    var array: [3]int32
    var s: S = {buffer = array}
</code></pre></div><p>The variable <code>s</code> is associated to (points to) the variable <code>array</code> via the read-write reference <code>s.buffer</code>.</p>
<h3 id="references-are-not-first-class-types">References are not first-class types</h3>
<p>References only occur implicitly as parameters or explicitly as reference definitions.</p>
<p>Blech implicitly takes references and de-references them if necessary.
There is no such thing like an adress operator <code>&amp;</code> or a de-referencing operator <code>*</code> as known from other imperative languages.</p>
<p>References must be initialised at their declaration.</p>
<p>This is done when</p>
<ol>
<li>an actual parameter is supplied in a subprogram call, or</li>
<li>an initialiser is given in a reference declaration.</li>
</ol>
<p>This enables the compiler to conservatively track reference relationships across the program and in turn enables causality analysis.</p>
<p>It prevents dangling references and circumvents pointer aliasing problems.</p>
<p>The <code>ref</code> in a reference declaration is also <strong>not</strong> a type constructor, that might occur anywhere in type expressions.
It is an additional property of a memory location or a value.</p>
<h3 id="the-problem-with-references">The problem with references</h3>
<p>The use of references can make a program difficult to reason about.</p>
<p>If we do the same thing as above in sequential code,</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">var i: int32

let ref a = i
var ref b = i

b = 1
b = a + b
</code></pre></div><p>we run into the same problems: <code>a</code> is a read-only reference to <code>i</code>, <code>b</code> is a read-write reference to <code>i</code>.
When we change <code>i</code> via <code>b</code> we implicitly change the value we get from <code>a</code>.</p>
<p>Even in the simple case</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">var i: int32

let ref a = i

b = 1
b = a + b
</code></pre></div><p>where we have a read-only reference to <code>i</code> while at the same time we can change <code>i</code> directly, we run into the same problems, when reasoning about a program.</p>
<p>Having a read-only access to a memory location, would not guarantee, that the underlying value does not change.</p>
<p>With references we need to be able to rule out calls like</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">    var i: integer
    let ref a = i
    var ref b = i

    run anActivity(a)(b)
    run anActivity(b)(i)
    run anActivity(i)(b)
    run anActivity(a)(i)

    aFunction(a)(b)
    aFunction(b)(i)
    aFunction(i)(b)
    aFunction(a)(i)

    cobegin 
        run fstTread(a)(i)
    with
        run sndThread(a)(b)
    end
</code></pre></div><p>due to read-write and write-write conflicts.</p>
<p>With references causality errors might be very difficult to understand and even sequential code is already confusing.</p>
<p>Luckily there is way of handling these problems at compile time.
In Rust this is called <a href="../20_borrowing"><strong>Borrowing Analysis</strong></a>
.</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">
  Last modified May 15, 2020: <a href="https://github.com/boschresearch/blech-doc/commit/fe810959f54b4449ca2e97b2cd709608650c9a8e">Clean up Old material added. (fe81095)</a>
</div>

</div>


          </main>
        </div>
      </div>
      


<div class="analytics-opt-in">
    <div class="text">
        <p>If you opt-in, we use cookies to improve your experience on our site. <a href="https://boschresearch.github.io/blech-doc/about/">Find out more.</a>
        </p>
    </div>  
    <div class="buttons">
        
        <a class="ok btn-sm btn-primary" onclick="optIn()">Opt-in</a>
        <a class="close" onclick="closeNotice()">&times</a>
    </div>
</div>

<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="The Blech mailing list" aria-label="The Blech mailing list">
    <a class="text-white" target="_blank" href="https://groups.google.com/d/forum/blech-lang">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter @BlechLanguage" aria-label="Twitter @BlechLanguage">
    <a class="text-white" target="_blank" href="https://twitter.com/BlechLanguage">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Documentation on GitHub" aria-label="Documentation on GitHub">
    <a class="text-white" target="_blank" href="https://github.com/boschresearch/blech-doc">
      <i class="fas fa-book"></i>
    </a>
  </li>
  
</ul>

        
        
        <h6 class="text-white">Blech users</h6>
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Blech compiler on Github" aria-label="Blech compiler on Github">
    <a class="text-white" target="_blank" href="https://github.com/boschresearch/blech">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Blech tools on Github" aria-label="Blech tools on Github">
    <a class="text-white" target="_blank" href="https://github.com/boschresearch/blech-tools">
      <i class="fas fa-tools"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Collaborate on Slack" aria-label="Collaborate on Slack">
    <a class="text-white" target="_blank" href="https://join.slack.com/t/blech-lang/shared_invite/enQtODkyMDg4MDQ2Mjc2LWZjZWI1MmE2NTNhOGU0ZTVmMGEzMzY1ODlmNzBlMDFhMTIwMDRlZDA1MmU2NjY2OTFlZTA1NWIwMzU3NThkY2I">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
        <h6 class="text-white">Blech developers</h6>
      </div>
      
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2019-2021 The Blech contributors</small>
        
        <small class="ml-1"><a href="https://boschresearch.github.io/blech-doc/about/privacy-policy/" style="color: skyblue" target="_blank">Privacy Policy</a></small>
        
          <p class="mt-2"><a href="https://boschresearch.github.io/blech-doc/about/corporate-information/" style="color: skyblue">Corporate information</a></p>
        
      </div>
      
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='https://boschresearch.github.io/blech-doc/js/tabpane-persist.js'></script>


















<script src="https://boschresearch.github.io/blech-doc/js/main.min.602773ee633d7e2783afada8c31019df4b639c23a2ae03c6139b6530b7f411d4.js" integrity="sha256-YCdz7mM9fieDr62owxAZ30tjnCOirgPGE5tlMLf0EdQ=" crossorigin="anonymous"></script>




  </body>
</html>